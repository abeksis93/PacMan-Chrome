<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>PacMan: Hungry Chrome</title>
		<link rel="stylesheet" href="./style.css">
		<link rel="icon" href="pics/chrome_pacman_1_r.png">
		<script src="./jquery-3.4.1.slim.min.js"></script>
		<script type="text/javascript" src="./app.js"></script>
	</head>



	<!-- GAME HEADER -->
	<header>
		<div id="header-img" align="center">
			<img src="pics/header_logo.png">
		</div>
	</header>


	<body>
		<!-- NAVIGATION MENU -->
		<nav class="navbar">
			<div class="menu-class" id="mainMenu">
			  <a id="menu_welcome" onclick="pageHandler('#welcome');">Welcome</a>
			  <a id="menu_signup" onclick="pageHandler('#signup');">Signup</a>
			  <a id="menu_login" onclick="pageHandler('#login');">Login</a>
			  <a id="aboutBtn" >About</a>
			</div>
		</nav>

		<section id="welcome">
		<!-- WELCOME PAGE -->
		  <div>
			<h1>Welcome to PacMan: Hungry Chrome</h1>
			<hr>
			<h2>Help Chrome-PacMan eat all the RAM he needs while evading the other browser ghosts. </h2>
			<h3>Lets Play!</h3>
			<p>
				If you have a user login to start playing:
				<br>
				<button id="login-btn" class="btns" align="center" onclick="pageHandler('#login');">Login</button>

				<br>Otherwise, signup now and start playing:
				<br>
				<button id="signup-btn" class="btns" align="center" onclick="pageHandler('#signup');">Signup</button>
			</p>
		  </div>


		</section>
		<section id="signup" class="hidden">
			<!-- SIGNUP PAGE -->
			<div>
				<h1>Signup</h1>
				<hr>
				<form class="signup-class" id="signup-form" align="center">
					<input type="text" id="uname" name="uname" placeholder="Username"></p>
					<input type="password" id="password" name="password" placeholder="Password"></p>
					<input type="text" id="fname" name="fname" placeholder="First Name"></p>
					<input type="text" id="lname" name="lname" placeholder="Last Name"></p>
					<input type="text" id="email" name="email" placeholder="Email"></p>
					<p><label for="day">Date of Birth:</label><br>
					<select name="day" id="day">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
						<option value="9">9</option>
						<option value="10">10</option>
						<option value="11">11</option>
						<option value="12">12</option>
						<option value="13">13</option>
						<option value="14">14</option>
						<option value="15">15</option>
						<option value="16">16</option>
						<option value="17">17</option>
						<option value="18">18</option>
						<option value="19">19</option>
						<option value="20">20</option>
						<option value="21">21</option>
						<option value="22">22</option>
						<option value="23">23</option>
						<option value="24">24</option>
						<option value="25">25</option>
						<option value="26">26</option>
						<option value="27">27</option>
						<option value="28">28</option>
						<option value="29">29</option>
						<option value="30">30</option>
						<option value="31">31</option>
					</select>
					<select name="month" id="month">
						<option value="Jan">Jan</option>
						<option value="Feb">Feb</option>
						<option value="Mar">Mar</option>
						<option value="Apr">Apr</option>
						<option value="May">May</option>
						<option value="Jun">Jun</option>
						<option value="Jul">Jul</option>
						<option value="Aug">Aug</option>
						<option value="Sep">Sep</option>
						<option value="Oct">Oct</option>
						<option value="Nov">Nov</option>
						<option value="Dec">Dec</option>
					</select>
					<select name="year" id="year">
						<option value=j1900j>1900</option>
						<option value=j1901j>1901</option>
						<option value=j1902j>1902</option>
						<option value=j1903j>1903</option>
						<option value=j1904j>1904</option>
						<option value=j1905j>1905</option>
						<option value=j1906j>1906</option>
						<option value=j1907j>1907</option>
						<option value=j1908j>1908</option>
						<option value=j1909j>1909</option>
						<option value=j1910j>1910</option>
						<option value=j1911j>1911</option>
						<option value=j1912j>1912</option>
						<option value=j1913j>1913</option>
						<option value=j1914j>1914</option>
						<option value=j1915j>1915</option>
						<option value=j1916j>1916</option>
						<option value=j1917j>1917</option>
						<option value=j1918j>1918</option>
						<option value=j1919j>1919</option>
						<option value=j1920j>1920</option>
						<option value=j1921j>1921</option>
						<option value="1922">1922</option>
						<option value="1923">1923</option>
						<option value="1924">1924</option>
						<option value="1925">1925</option>
						<option value="1926">1926</option>
						<option value="1927">1927</option>
						<option value="1928">1928</option>
						<option value="1929">1929</option>
						<option value="1930">1930</option>
						<option value="1931">1931</option>
						<option value="1932">1932</option>
						<option value="1933">1933</option>
						<option value="1934">1934</option>
						<option value="1935">1935</option>
						<option value="1936">1936</option>
						<option value="1937">1937</option>
						<option value="1938">1938</option>
						<option value="1939">1939</option>
						<option value="1940">1940</option>
						<option value="1941">1941</option>
						<option value="1942">1942</option>
						<option value="1943">1943</option>
						<option value="1944">1944</option>
						<option value="1945">1945</option>
						<option value="1946">1946</option>
						<option value="1947">1947</option>
						<option value="1948">1948</option>
						<option value="1949">1949</option>
						<option value="1950">1950</option>
						<option value="1951">1951</option>
						<option value="1952">1952</option>
						<option value="1953">1953</option>
						<option value="1954">1954</option>
						<option value="1955">1955</option>
						<option value="1956">1956</option>
						<option value="1957">1957</option>
						<option value="1958">1958</option>
						<option value="1959">1959</option>
						<option value="1960">1960</option>
						<option value="1961">1961</option>
						<option value="1962">1962</option>
						<option value="1963">1963</option>
						<option value="1964">1964</option>
						<option value="1965">1965</option>
						<option value="1966">1966</option>
						<option value="1967">1967</option>
						<option value="1968">1968</option>
						<option value="1969">1969</option>
						<option value="1970">1970</option>
						<option value="1971">1971</option>
						<option value="1972">1972</option>
						<option value="1973">1973</option>
						<option value="1974">1974</option>
						<option value="1975">1975</option>
						<option value="1976">1976</option>
						<option value="1977">1977</option>
						<option value="1978">1978</option>
						<option value="1979">1979</option>
						<option value="1980">1980</option>
						<option value="1981">1981</option>
						<option value="1982">1982</option>
						<option value="1983">1983</option>
						<option value="1984">1984</option>
						<option value="1985">1985</option>
						<option value="1986">1986</option>
						<option value="1987">1987</option>
						<option value="1988">1988</option>
						<option value="1989">1989</option>
						<option value="1990">1990</option>
						<option value="1991">1991</option>
						<option value="1992">1992</option>
						<option value="1993">1993</option>
						<option value="1994">1994</option>
						<option value="1995">1995</option>
						<option value="1996">1996</option>
						<option value="1997">1997</option>
						<option value="1998">1998</option>
						<option value="1999">1999</option>
						<option value="2000">2000</option>
						<option value="2001">2001</option>
						<option value="2002">2002</option>
						<option value="2003">2003</option>
						<option value="2004">2004</option>
						<option value="2005">2005</option>
						<option value="2006">2006</option>
						<option value="2007">2007</option>
						<option value="2008">2008</option>
						<option value="2009">2009</option>
						<option value="2010">2010</option>
						<option value="2011">2011</option>
						<option value="2012">2012</option>
						<option value="2013">2013</option>
						<option value="2014">2014</option>
						<option value="2015">2015</option>
						<option value="2016">2016</option>
						<option value="2017">2017</option>
						<option value="2018">2018</option>
						<option value="2019">2019</option>
						<option value="2020">2020</option>
						<option value="2021">2021</option>
						<option value="2022">2022</option>
					</select></p>
				</form>
				<div id="submit_reg" align="center">
					<input type="submit" value="Signup" class="btns">
				</div>
				<script>
				$( "#submit_reg" ).click(function() {
					var names=true;
					var valid=true;
					var Letters = /[a-zA-Z]/g;
					var fname=$("#fname");
					var lname=$("#lname");
					if(fname.val().length == 0){
						valid=false;
					}
					if(/\d/.test(fname.val())){
						names=false;
					}
					if(/\d/.test(lname.val())){
						names=false;
					}
					if(!names & fname.val().length>0 & lname.val().length>0){
						valid=false;
					}
					if(lname.val().length == 0){
						valid=false;
					}
					var uname=$("#uname");
					if(uname.val().length == 0){
						valid=false;
					}
					var passValid=false;
					var password=$("#password");

					if(/\d/.test(password.val())){
						if(Letters.test(password.val())){
							passValid=true;
						}
					}
					if(!passValid & password.val().length>5){
						valid=false;
					}
					if(password.val().length == 0){
						valid=false;
					}
					var email=$("#email");
					if(email.val().length == 0){
						valid=false;
					}
					if(users[uname.val()]!=undefined){
						valid=false;
						window.alert("This Username Already Exists");
					}
					var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
					if(!email.val().match(mailformat) & email.val().length!=0){
						valid=false;
					}
					if(valid & passValid & names){
						window.alert("Signed Up Successfully");
						users[uname.val()]=password.val();
						$("#uname").val("");
						$("#password").val("");
						$("#fname").val("");
						$("#lname").val("");
						$("#uname").val("");
						$("#email").val("");
						$("#day").val("1");
						$("#month").val("Jan");
						$("#year").val("j1900j");
						// pageHandler('#settings');
						pageHandler('#login');
					}
					else if(users[uname.val()]==undefined)
					{
						window.alert( "Make Sure The Password Length Is At Least 6 And Includes Numbers And Letters, First And Last Name Doesn't Contain Numbers, Mail Is Valid, And All TextBoxes Aren't Empty! :)" );
					}
				});
				</script>
			</div>
		</section>
		<section id="login" class="hidden">
			<!-- LOGIN PAGE -->
			<div >
				<h1>Login</h1>
				<hr>
				<br>
				<form id="login-form"  align="center">
					<input type="text" id="uname2" name="uname2" placeholder="Username"></p>
					<input type="password" id="password2" name="password2" placeholder="Password"></p>
				</form>
				<div id="submit2" align="center">
					<input type="submit" value="Login" class="btns">
				</div>
				<script>
				$("#submit2").click(function(){
					valid=false;
					var uname=$("#uname2");
					var password=$("#password2");
					if(uname.val().length>0 & password.val().length>0){
						if(users[uname.val()]==password.val()){
							valid=true;
						}
					}
					if(valid){
						lblUname.value=uname.val();
						alert(`Welcome back ${uname.val()}!\nYou will be directed automatically to the settings page.`);
						$("#uname2").val("");
						$("#password2").val("");
						pageHandler('#settings');
					}
					else{
						alert('Username/Password are incorrect');
					}


				});
				</script>
			</div>
			<br>
		</section>

		<!-- SETTINGS PAGE -->
		<section id="settings" class="hidden">
		<div>
			<h1>Select Your Setting</h1>
			<hr>
			<form id="settings-form" name="settingsForm" align="center" autocomplete="off">
				<p>
					Up Key:
					<input id="up-key" name="upKey" type="text" required onkeydown="upKeyListener(event)" maxlength="1" placeholder="Up Key">
				</p>
				<p>
					Down Key:
					<input id="down-key" name="downKey" type="text" required onkeydown="downKeyListener(event)" maxlength="1" placeholder="Down Key">
				</p>
				<p>
					Left Key:
					<input id="left-key" name="leftKey" type="text" required onkeydown="leftKeyListener(event)" maxlength="1" placeholder="Left Key">
				</p>
				<p>
					Right Key:
					<input id="right-key" name="rightKey"type="text" required onkeydown="rightKeyListener(event)" maxlength="1" placeholder="Right Key">
				</p>
				<p>
					Number of Balls:
					<input id="num-balls-id" name="num-balls" type="number" required min="50" max="90" value="50">
				</p>
				<p>
					5 Points Ball Color:
					<input id="small-ball-color" class ="settings-color" required name="small-ball-color" type="color" >
				</p>
				<p>
					15 Points Ball Color:
					<input id="medium-ball-color" class ="settings-color" required name="medium-ball-color" type="color">
				</p>
				<p>
					25 Points Ball Color:
					<input id="big-ball-color" class ="settings-color" required name="big-ball-color" type="color">
				</p>
				<p>
					Time to play (in seconds):
					<input id="play-time" name="play-time" required min="60" max="600" placeholder="Minimum of 60 seconds" value="60" >
				</p>
				<p>
					Number of Ghosts:
					<input id="num-ghosts" name="num-ghosts" required type="number" value = "1" min="1" max="4">
				</p>
			</form>
			<div class="settingButton"  align="center">
				<div>
					<button id='settingRandom' class="btns" type="text" onclick="randomSetting();" >Random</button>
					<button id='setting' class="btns" type="submit" onclick="settingValidator();">Let's Play</button>
					<br>
					<br>
					<br>
				</div>

			</div>
		</div>
		</section>
			</section>
		</section>


		<!-- This code was taken from: https://www.w3schools.com/howto/howto_css_modals.asp -->
		<div id="myModal" class="modal">
			<div class="modal-content">
			<span class="close">&times;</span>
			<h1>About</h1>
			<hr>
			<h2>Greetings to all the RAM hungry visitors!</h2>
			<p>Welcome to our PacMan game, we called this version "Hungry Chrome".
			<br>The entire game is themed around Google Chrome and other web browsers.
			<br>Created by Yonatan Abeksis and Shahar Cohen (2022).
			<br><h2>Hope you EnJOY!</h2>
			</div>
		</div>

		<script>
			//Get the modal
			var modal = document.getElementById("myModal");
			//Get the button that opens the modal
			var btn = document.getElementById("aboutBtn");
			//Get the <span> element that closes the modal
			var span = document.getElementsByClassName("close")[0];
			//When the user clicks the button, open the modal
			btn.onclick = function() {
			modal.style.display = "block";
			}
			//When the user clicks on <span> (x), close the modal
			span.onclick = function() {
			modal.style.display = "none";
			}
			//When the user clicks anywhere outside of the modal, close it
			window.onclick = function(event) {
			if (event.target == modal) {
				modal.style.display = "none";
			}
			}
			//esc
			window.onkeydown = function(event) {
			if ( event.keyCode == 27 ) {
				modal.style.display = "none";
			}
			};
		</script>


		<section id="game-section" class="hidden" align="center">
			<div id="stats">

				<h3>Game Progress:</h3>
				<h2><label for="lblScore">SCORE:</label>
				<input id="lblScore" type="text" />
				<label for="lblTime">TIME:</label>
				<input id="lblTime" type="text" />
				<label for="lblLives">LIVES:</label>
				<input id="lblLives" type="text" /></h2>
			</div>
			<hr>
			<table id="game-table" align="center">
				<tr>
					<th id="settings-col" >
						<h3>Settings:</h3>
						<h4><label for="lblUname">User:</label>
						<input id="lblUname" type="text" value="k" readonly="true" style="width: 75px;"/>
						<br><label for="lblUp">UP:</label>
						<input id="lblUp" type="text" value="ArrowUp" readonly="true" style="width: 75px;"/>
						<br><label for="lblDown">DOWN:</label>
						<input id="lblDown" type="text" value="ArrowDown" readonly="true" style="width: 75px;"/>
						<br><label for="lblLeft">LEFT:</label>
						<input id="lblLeft" type="text" value="ArrowLeft" readonly="true" style="width: 75px;"/>
						<br><label for="lblRight">RIGHT:</label>
						<input id="lblRight" type="text" value="ArrowRight" readonly="true" style="width: 75px;"/>
						<br><label for="lblBalls">BALLS NUMBER:</label>
						<input id="lblBalls" type="text" value="50" readonly="true" style="width: 50px;"/>
						<br><label for="lblGameTime">GAME TIME:</label>
						<input id="lblGameTime" type="text" value="60" readonly="true" style="width: 50px;"/>
						<br><label for="lblGhosts">GHOSTS NUMBER:</label>
						<input id="lblGhosts" type="text" value="4" readonly="true" style="width: 50px;"/>
						<br><label for="lblColor">5 COLOR:</label>
						<input id="lblColor" type="color" disabled />
						<br><label for="lblColor2">15 COLOR:</label>
						<input id="lblColor2" type="color" disabled />
						<br><label for="lblColor3">25 COLOR:</label>
						<input id="lblColor3" type="color" disabled />
						<br><label for="lblMedicine">MEDICINE TIMER:</label>
						<input id="lblMedicine" type="text" value="20" readonly="true" style="width: 50px;"/></h4>
						<br>
						<br><button id='new_game' class="btns" type="submit" align="center" onclick="newGameHandler();">New Game</button>
						<button id='song-ctrl' class="btns" align="center" onclick="pauseMusic();">Pause Song</button>
					</th>
					<th id="game-col" align="center">
						<div id="game">
							<canvas id="canvas" height="600" width="600" ></canvas>
						</div>
					</th>
				</tr>
			</table>
			<br>
		</section>

		<footer id="footer" align="center">
			<div id = "footer-text" >
				<br>Created by Yonatan Abeksis and Shahar Cohen
			</div>
	 	</footer>

	</body>
</html>
